"use strict";(self.webpackChunkjsvm2_docs=self.webpackChunkjsvm2_docs||[]).push([[5737],{5545:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>x,frontMatter:()=>i,metadata:()=>c,toc:()=>a});var t=s(6070),r=s(1249);const i={sidebar_position:2},l="VM API",c={id:"api/vm",title:"VM API",description:"\u865a\u62df\u673a API \u662f JSVM2 \u7684\u6838\u5fc3\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u4ee3\u7801\u6267\u884c\u7684\u4e3b\u8981\u529f\u80fd\u3002",source:"@site/docs/api/vm.md",sourceDirName:"api",slug:"/api/vm",permalink:"/jsvm2/docs/api/vm",draft:!1,unlisted:!1,editUrl:"https://github.com/ximing/jsvm2/tree/master/docs/docs/api/vm.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"API \u6982\u89c8",permalink:"/jsvm2/docs/api/overview"},next:{title:"Context API",permalink:"/jsvm2/docs/api/context"}},d={},a=[{value:"run()",id:"run",level:2},{value:"\u53c2\u6570",id:"\u53c2\u6570",level:3},{value:"\u8fd4\u56de\u503c",id:"\u8fd4\u56de\u503c",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:3},{value:"runInContext()",id:"runincontext",level:2},{value:"\u53c2\u6570",id:"\u53c2\u6570-1",level:3},{value:"\u8fd4\u56de\u503c",id:"\u8fd4\u56de\u503c-1",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-1",level:3},{value:"createContext()",id:"createcontext",level:2},{value:"\u53c2\u6570",id:"\u53c2\u6570-2",level:3},{value:"\u8fd4\u56de\u503c",id:"\u8fd4\u56de\u503c-2",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b-2",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"vm-api",children:"VM API"})}),"\n",(0,t.jsx)(n.p,{children:"\u865a\u62df\u673a API \u662f JSVM2 \u7684\u6838\u5fc3\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u4ee3\u7801\u6267\u884c\u7684\u4e3b\u8981\u529f\u80fd\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"run",children:"run()"}),"\n",(0,t.jsx)(n.p,{children:"\u76f4\u63a5\u6267\u884c AST \u5e76\u8fd4\u56de\u7ed3\u679c\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"function run(ast: any, context?: Context): any\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u53c2\u6570",children:"\u53c2\u6570"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ast"})," - Babel \u89e3\u6790\u7684 AST \u5bf9\u8c61"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"context"})," - \u53ef\u9009\u7684\u6267\u884c\u4e0a\u4e0b\u6587"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u8fd4\u56de\u503c",children:"\u8fd4\u56de\u503c"}),"\n",(0,t.jsx)(n.p,{children:"\u6267\u884c\u7ed3\u679c\uff0c\u53ef\u4ee5\u662f\u4efb\u4f55 JavaScript \u503c\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"import { run } from 'jsvm2';\nimport { parse } from '@babel/parser';\n\nconst ast = parse('2 + 3');\nconst result = run(ast);\nconsole.log(result); // 5\n"})}),"\n",(0,t.jsx)(n.h2,{id:"runincontext",children:"runInContext()"}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u6307\u5b9a\u7684\u6c99\u7bb1\u4e0a\u4e0b\u6587\u4e2d\u6267\u884c AST\uff0c\u652f\u6301\u6a21\u5757\u5316\u5bfc\u51fa\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"function runInContext(ast: any, context?: Context): any\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u53c2\u6570-1",children:"\u53c2\u6570"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ast"})," - Babel \u89e3\u6790\u7684 AST \u5bf9\u8c61"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"context"})," - \u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u9ed8\u8ba4\u4e3a\u65b0\u521b\u5efa\u7684\u7a7a\u4e0a\u4e0b\u6587"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u8fd4\u56de\u503c-1",children:"\u8fd4\u56de\u503c"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5982\u679c\u4ee3\u7801\u4e2d\u6709 ",(0,t.jsx)(n.code,{children:"module.exports"}),"\uff0c\u8fd4\u56de\u5bfc\u51fa\u7684\u5185\u5bb9"]}),"\n",(0,t.jsx)(n.li,{children:"\u5426\u5219\u8fd4\u56de\u6700\u540e\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684\u503c"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u793a\u4f8b-1",children:"\u793a\u4f8b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"import { runInContext, createContext } from 'jsvm2';\nimport { parse } from '@babel/parser';\n\nconst context = createContext({ x: 10 });\nconst ast = parse('x * 2');\nconst result = runInContext(ast, context);\nconsole.log(result); // 20\n"})}),"\n",(0,t.jsx)(n.h2,{id:"createcontext",children:"createContext()"}),"\n",(0,t.jsx)(n.p,{children:"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6267\u884c\u4e0a\u4e0b\u6587\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"function createContext(sandbox?: ISandBox): Context\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u53c2\u6570-2",children:"\u53c2\u6570"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"sandbox"})," - \u53ef\u9009\u7684\u6c99\u7bb1\u5bf9\u8c61\uff0c\u5b9a\u4e49\u53ef\u8bbf\u95ee\u7684\u5168\u5c40\u53d8\u91cf"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u8fd4\u56de\u503c-2",children:"\u8fd4\u56de\u503c"}),"\n",(0,t.jsx)(n.p,{children:"\u65b0\u521b\u5efa\u7684 Context \u5b9e\u4f8b\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u793a\u4f8b-2",children:"\u793a\u4f8b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"import { createContext } from 'jsvm2';\n\nconst context = createContext({\n  name: 'JSVM2',\n  version: '1.2.5',\n  customFunction: () => 'Hello!'\n});\n"})})]})}function x(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);